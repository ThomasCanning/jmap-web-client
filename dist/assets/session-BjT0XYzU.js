import{u as c,a as o,j as e}from"./index-BURhTyEY.js";import{u as l}from"./useQuery-C1wgCaVe.js";import{u as d,l as u,C as m,a as x,b as h,c as j,d as p,B as t,A as f,e as g,f as y,g as N}from"./alert-B2XfyHqZ.js";function F(){const a=c(),n=o(),s=l({queryKey:["session"],queryFn:N,enabled:!1,retry:!1}),i=d({mutationFn:u,onSuccess:()=>{n.invalidateQueries({queryKey:["session"]}),a({to:"/"})}}),r=()=>{s.refetch()};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"w-full max-w-2xl space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"JMAP Session"}),e.jsx("p",{className:"text-muted-foreground",children:"View your JMAP session information"})]}),e.jsxs(m,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Session Information"}),e.jsx(j,{children:"Fetch and display your current JMAP session"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx(t,{onClick:r,disabled:s.isFetching,variant:"default",children:s.isFetching?"Loading...":"Fetch Session"})}),s.isError&&e.jsx(f,{variant:"destructive",children:e.jsx(g,{children:s.error instanceof Error?s.error.message:"Failed to fetch session"})}),s.isSuccess&&s.data&&e.jsx(v,{session:s.data}),!s.data&&!s.isFetching&&!s.isError&&e.jsx("p",{className:"text-sm text-muted-foreground",children:'Click "Fetch Session" to retrieve your session information using Bearer authentication (cookies).'})]}),e.jsx(y,{className:"border-t pt-6",children:e.jsx(t,{onClick:()=>i.mutate(),disabled:i.isPending,variant:"destructive",className:"w-full",children:i.isPending?"Logging out...":"Logout"})})]})]})})}function v({session:a}){return e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"API URL:"})," ",e.jsx("span",{className:"text-muted-foreground",children:a.apiUrl})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Capabilities:"})," ",e.jsx("span",{className:"text-muted-foreground",children:Object.keys(a.capabilities).length>0?Object.keys(a.capabilities).join(", "):"None"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Primary Accounts:"})," ",e.jsx("span",{className:"text-muted-foreground",children:Object.keys(a.primaryAccounts).length>0?Object.keys(a.primaryAccounts).length:"None"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs font-medium mb-2",children:"Raw Session Data:"}),e.jsx("pre",{className:"bg-muted p-3 rounded-md text-xs overflow-auto",children:JSON.stringify(a,null,2)})]})]})}export{F as component};
